<h1>Deployment Guide: Heroku Bots</h1>
<h2>Purpose</h2>
<p>This guide provides a simple to follow, <strong>step by step process</strong> that focuses on:</p>
<ul>
<li><strong>Deploying bots</strong>, written in <strong>Python</strong></li>
<li>on <strong><a href="https://www.heroku.com/">Heroku</a></strong></li>
<li><strong>without exposing</strong> any <strong>secrets</strong> (<em>example: API keys</em>)</li>
<li>using only the <strong>command line</strong> via <a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install">heroku-cli</a>.</li>
</ul>
<h2>Step by Step Guide</h2>
<ol>
<li>
<p><strong>Fork</strong> <a href="https://github.com/outputs-io/heroku-bot">this repository</a> to get started.</p>
<p><img src="images/fork.png" alt="fork.png"></p>
</li>
<li>
<p>GitHub will redirect you to your new fork. Click the green <code>Clone or download</code> button to retreive the <strong>SSH url</strong> of your freshly forked repository. Select the address, and copy it to your clipboard.</p>
<p><img src="images/clone.png" alt="clone.png"></p>
</li>
<li>
<p><strong>Open Terminal</strong>, <strong>navigate</strong> to the directory you store your code, and <strong>clone</strong> your new repository to your local machine.</p>
<p><em>Example</em>:</p>
<pre><code class="language-bash">cd ~/dev/repos
git clone git@github.com:droxey/heroku-bot.git
</code></pre>
</li>
<li>
<p><strong>Install requirements</strong> from <code>requirements.txt</code>:</p>
<pre><code class="language-bash">cd heroku-bot
source activate PythonData
pip install -r requirements.txt
</code></pre>
</li>
</ol>
<ol>
<li>
<p><strong>Create Heroku App</strong></p>
<p>Run <code>heroku apps:create</code> to create a new Heroku application, replacing <code>name-for-app-here</code> with a name of your choosing:</p>
<pre><code class="language-bash">heroku apps:create name-for-app-here
</code></pre>
</li>
<li>
<p><strong>Add Environment Variables</strong></p>
<p>Next, we need to <strong>keep our secret data safe</strong>. API keys, database passwords, and other credentials should <strong>never</strong> be committed to git, nor pushed to GitHub.</p>
<p>Inform Heroku of our keys by running <code>heroku config:set</code> for each API Key, password, etc:</p>
<pre><code class="language-bash">heroku config:set CONSUMER_KEY=1ziaVCudxqnGg2aZ7iFPBDqA6
heroku config:set CONSUMER_SECRET=pP8eXXtKDSjaQGGOxmMgoeTIySKJlkIoUJ6fnxQt89N3Uw5ziQ
heroku config:set ACCESS_TOKEN=981737227536379905-2mZsUFZM6I6w6PZlNzBIIPDR57TU3P6
heroku config:set ACCESS_TOKEN_SECRET=7GKRu3AyQZzmvRWqCmCoXVuv9QnMEdRwUrhVfV1W3hXFB
</code></pre>
<p>Then store the keys in a special <code>.env</code> file by running <code>heroku config:get KEY_NAME -s &gt;&gt; .env</code> for each secret value you'd like to store:</p>
<pre><code class="language-bash">heroku config:get CONSUMER_KEY -s  &gt;&gt; .env
heroku config:get CONSUMER_SECRET -s  &gt;&gt; .env
heroku config:get ACCESS_TOKEN -s  &gt;&gt; .env
heroku config:get ACCESS_TOKEN_SECRET -s  &gt;&gt; .env
</code></pre>
<p>Don't worry, <code>.env</code> is already in <code>.gitignore</code> --- this means secrets are only visible to you, and to Heroku upon deployment!</p>
</li>
<li>
<p><strong>Implement Bot</strong>: open <code>ChatterBot.py</code> in your favorite editor, and write your code. Don't forget to test!</p>
</li>
<li>
<p><strong>Commit Your Changes Incrementally</strong></p>
<p><strong><em>Great developers commit early and often!</em></strong></p>
<p>Be sure to <code>add</code> and <code>commit</code> your changes to your local git repository <strong>each time</strong> you reach a milestone, fix a bug, or need to take a break.</p>
<pre><code class="language-bash">git add .
git commit -m &quot;[fix] typo in quote on line 28.&quot;
</code></pre>
</li>
<li>
<p><strong>Push Your Changes to GitHub</strong></p>
<p>Ready to take your changes live? Awesome!</p>
<p>Let's double check you've committed all your changes by running the following command:</p>
<pre><code class="language-bash">git status
</code></pre>
<p>If <code>git status</code> returns a list of files, <code>add</code>, <code>commit</code>, then run <code>git status</code> again.</p>
<p>If <code>git status</code> returns <code>nothing to commit, working tree clean</code>, excellent! You're ready to push your changes to GitHub:</p>
<pre><code class="language-bash">git push origin master
</code></pre>
</li>
<li>
<p><strong>Deploy to Heroku</strong></p>
<p>Finally, run the below commands to <strong>deploy</strong> your application to Heroku.</p>
<pre><code class="language-bash">git push heroku master
heroku ps:scale worker=1
</code></pre>
<p><em><strong>Protip</strong>: be sure to <strong>read the output</strong>. This will come in handy if you run into any errors!</em></p>
</li>
<li>
<p><strong><em>Congratulations!</em></strong> You've just successfully deployed your application! Show the world!</p>
</li>
</ol>
